# DIV(ision) service /for Calculator/ 
This is simple math service; which can be used for multi purpose. (Mostly for demo)


## BUILD
Depedency libs are defined in the `package.json` file.  
We need to resolve them before app starting.  
Go to the same folder where 'package.json' is present and fire below command in the console:  
`node install`

## RUNNING

Make sure node is installed and all depedency have been available.  
We can verify that firing `node -v` or `npm -v` on the console.  

We can bring up the service by passing main/start js script file to node interpretor on the console.
`node app.js` or `npm start`


This will bring the service up and show the below.
```
C:\Users\Home\Desktop\uservices\microcalc\mulJs>npm start

> uservices.microcalc.div@0.0.1 start
> node app.js

service launched at  4000
Terminate batch job (Y/N)? y
```

or  

In development; we can start application by running `npm run start:dev` which will auto restart if any changed found.

```
C:\Users\Home\Desktop\uservices\microcalc\divJs>npm run start:dev

> uservices.microcalc.div@0.0.1 start:dev
> pm2-dev app.js

===============================================================================
--- PM2 development mode ------------------------------------------------------
Apps started         : app
Processes started    : 1
Watch and Restart    : Enabled
Ignored folder       : node_modules
===============================================================================
app-0  | service launched at  4000
>>>>> [PM2 DEV] Stopping current development session
Terminate batch job (Y/N)? y
```

## OUTPUT

* *Server output*

These are the logs/output generated by the service on development mode.
Corresonding to the requests from the curl.
```

> uservices.microcalc.div@0.0.1 start:dev
> pm2-dev app.js

===============================================================================
--- PM2 development mode ------------------------------------------------------
Apps started         : app
Processes started    : 1
Watch and Restart    : Enabled
Ignored folder       : node_modules
===============================================================================
app-0  | service name: div, version: v1 launched at  8084
[rundev] App app restarted
app-0  | service name: div, version: v1 launched at  8084
app-0  |   <-- POST /api/v1/div
app-0  | req.body =  {
app-0  |   method: 'POST',
app-0  |   url: '/api/v1/div',
app-0  |   header: {
app-0  |     host: 'localhost:8084',
app-0  |     'user-agent': 'curl/7.83.1',
app-0  |     accept: '*/*',
app-0  |     'content-type': 'application/json',
app-0  |     'content-length': '19'
app-0  |   }
app-0  | }
app-0  |   xxx POST /api/v1/div 500 258ms -
app-0  |   TypeError: undefined is not iterable (cannot read property Symbol(Symbol.iterator))
   
[rundev] App app restarted
app-0  | service name: div, version: v1 launched at  8084
app-0  |   <-- POST /api/v1/div
app-0  | req.body =  {
app-0  |   method: 'POST',
app-0  |   url: '/api/v1/div',
app-0  |   header: {
app-0  |     host: 'localhost:8084',
app-0  |     'user-agent': 'curl/7.83.1',
app-0  |     accept: '*/*',
app-0  |     'content-type': 'application/json',
app-0  |     'content-length': '19'
app-0  |   }
app-0  | }
app-0  |   --> POST /api/v1/div 400 88ms 59b
[rundev] App app restarted
app-0  | C:\Users\Home\Desktop\uservices\microcalc\divJs\app.js:51
app-0  |                 ctx.status = 400
app-0  |                    ^
app-0  | SyntaxError: Unexpected token '.'



C:\Users\Home\Desktop\uservices\microcalc\divJs>npm run start:dev

> uservices.microcalc.div@0.0.1 start:dev
> pm2-dev app.js

===============================================================================
--- PM2 development mode ------------------------------------------------------
Apps started         : app
Processes started    : 1
Watch and Restart    : Enabled
Ignored folder       : node_modules
===============================================================================
app-0  | service name: div, version: v1 launched at  8084
app-0  |   <-- POST /api/v1/div
app-0  | req.body =  {
app-0  |   method: 'POST',
app-0  |   url: '/api/v1/div',
app-0  |   header: {
app-0  |     host: 'localhost:8084',
app-0  |     'user-agent': 'curl/7.83.1',
app-0  |     accept: '*/*',
app-0  |     'content-type': 'application/json',
app-0  |     'content-length': '19'
app-0  |   }
app-0  | }
app-0  |   --> POST /api/v1/div 400 81ms 59b
[rundev] App app restarted
app-0  | service name: div, version: v1 launched at  8084
app-0  |   <-- POST /api/v1/div
app-0  | req.body =  { operands: [ 6, 4 ] }
app-0  |   --> POST /api/v1/div 400 113ms 59b
[rundev] App app restarted
app-0  | C:\Users\Home\Desktop\uservices\microcalc\divJs\app.js:50
app-0  |             {
app-0  |             ^
app-0  | SyntaxError: Unexpected token '{'
^C

C:\Users\Home\Desktop\uservices\microcalc\divJs>npm run start:dev

> uservices.microcalc.div@0.0.1 start:dev
> pm2-dev app.js

===============================================================================
--- PM2 development mode ------------------------------------------------------
Apps started         : app
Processes started    : 1
Watch and Restart    : Enabled
Ignored folder       : node_modules
===============================================================================
app-0  | service name: div, version: v1 launched at  8084
app-0  |   <-- POST /api/v1/div
app-0  | req.body =  { operands: [ 6, 4 ] }
app-0  |   --> POST /api/v1/div 400 70ms 59b
[rundev] App app restarted
app-0  | service name: div, version: v1 launched at  8084
app-0  |   <-- POST /api/v1/div
app-0  | req.body =  { operands: [ 6, 4 ] }
app-0  |   --> POST /api/v1/div 400 77ms 59b
[rundev] App app restarted
app-0  | service name: div, version: v1 launched at  8084
app-0  |   <-- POST /api/v1/div
app-0  | req.body =  { operands: [ 6, 4 ] }
app-0  |   --> POST /api/v1/div 400 71ms 59b
[rundev] App app restarted
app-0  | service name: div, version: v1 launched at  8084
app-0  |   <-- POST /api/v1/div
app-0  | request.body =  { operands: [ 6, 4 ] }
app-0  | ctx.body =  undefined
app-0  |   --> POST /api/v1/div 400 81ms 59b
[rundev] App app restarted
app-0  | service name: div, version: v1 launched at  8084
app-0  |   <-- POST /api/v1/div
app-0  | request.body =  { operands: [ 6, 4 ] }
app-0  | ctx.body =  undefined
app-0  |   xxx POST /api/v1/div 500 64ms -
app-0  |   TypeError: Cannot read properties of undefined (reading 'operands')
   
[rundev] App app restarted
app-0  | service name: div, version: v1 launched at  8084
app-0  |   <-- POST /api/v1/div
app-0  | request.body =  { operands: [ 6, 4 ] }
app-0  | Received 6 4
app-0  |   --> POST /api/v1/div 200 80ms 124b
[rundev] App app restarted
app-0  | service name: div, version: v1 launched at  8084
app-0  |   <-- POST /api/v1/div
app-0  | request.body =  { operands: [ 6, 4 ] }
app-0  | Received 6 4
app-0  |   --> POST /api/v1/div 200 83ms 112b
[rundev] App app restarted
app-0  | service name: div, version: v1 launched at  8084
app-0  |   <-- POST /api/v1/div
app-0  | request.body =  { operands: [ 6, 4 ] }
app-0  | Received 6 4
app-0  |   --> POST /api/v1/div 200 70ms 115b
[rundev] App app restarted
app-0  | service name: div, version: v1 launched at  8084
app-0  |   <-- POST /api/v1/div
app-0  | request.body =  { operands: [ 6, 4 ] }
app-0  | Received 6 4
app-0  |   --> POST /api/v1/div 200 79ms 116b
[rundev] App app restarted
app-0  | service name: div, version: v1 launched at  8084
[rundev] App app restarted
app-0  | service name: div, version: v1 launched at  8084
app-0  |   <-- POST /api/v1/div
app-0  | request.body =  { operands: [ 6, 4 ] }
app-0  | Received 6 4
app-0  |   --> POST /api/v1/div 200 76ms 137b
[rundev] App app restarted
app-0  | service name: div, version: v1 launched at  8084
app-0  |   <-- POST /api/v1/div
app-0  | request.body =  { operands: [ 6, 4, 5 ] }
app-0  |   --> POST /api/v1/div 400 77ms 59b
[rundev] App app restarted
app-0  | service name: div, version: v1 launched at  8084
app-0  |   <-- POST /api/v1/div
app-0  | request.body =  { operands: [ 6, 4, 5 ] }
app-0  |   xxx POST /api/v1/div 400 66ms -
[rundev] App app restarted
app-0  | service name: div, version: v1 launched at  8084
app-0  |   <-- POST /api/v1/div
app-0  | request.body =  { operands: [ 6, 4, 5 ] }
app-0  |   xxx POST /api/v1/div 400 63ms -
app-0  |   <-- POST /api/v1/div
app-0  | request.body =  { operands: [ 6, 4 ] }
app-0  | Received 6 4
app-0  |   --> POST /api/v1/div 200 12ms 137b
[rundev] App app restarted
app-0  | service name: div, version: v1 launched at  8084
>>>>> [PM2 DEV] Stopping current development session
Terminate batch job (Y/N)? y

C:\Users\Home\Desktop\uservices\microcalc\divJs>
C:\Users\Home\Desktop\uservices\microcalc\divJs>
C:\Users\Home\Desktop\uservices\microcalc\divJs>
C:\Users\Home\Desktop\uservices\microcalc\divJs>
C:\Users\Home\Desktop\uservices\microcalc\divJs>
C:\Users\Home\Desktop\uservices\microcalc\divJs>clear
'clear' is not recognized as an internal or external command,
operable program or batch file.

C:\Users\Home\Desktop\uservices\microcalc\divJs>node app.js
Server Listening on Port 4000
^C
C:\Users\Home\Desktop\uservices\microcalc\divJs>npm start

> uservices.microcalc.div@0.0.1 start
> node app.js

Server Listening on Port 4000
Terminate batch job (Y/N)? y

C:\Users\Home\Desktop\uservices\microcalc\divJs>npm run start:dev

> uservices.microcalc.div@0.0.1 start:dev
> pm2-dev app.js

===============================================================================
--- PM2 development mode ------------------------------------------------------
Apps started         : app
Processes started    : 1
Watch and Restart    : Enabled
Ignored folder       : node_modules
===============================================================================
app-0  | Server Listening on Port 4000
>>>>> [PM2 DEV] Stopping current development session
Terminate batch job (Y/N)? y

C:\Users\Home\Desktop\uservices\microcalc\divJs>npm run start:dev

> uservices.microcalc.div@0.0.1 start:dev
> pm2-dev app.js

===============================================================================
--- PM2 development mode ------------------------------------------------------
Apps started         : app
Processes started    : 1
Watch and Restart    : Enabled
Ignored folder       : node_modules
===============================================================================
app-0  | Server Listening on Port 4000
app-0  |   <-- GET /
app-0  |   --> GET / 200 23ms 11b
[rundev] App app restarted
app-0  | service name: div, version: v1 launched at  8084
app-0  |   <-- GET /
app-0  |   --> GET / 200 23ms 11b
[rundev] App app restarted

C:\Users\Home\Desktop\uservices\microcalc\divJs>npm run start:dev

> uservices.microcalc.div@0.0.1 start:dev
> pm2-dev app.js

===============================================================================
--- PM2 development mode ------------------------------------------------------
Apps started         : app
Processes started    : 1
Watch and Restart    : Enabled
Ignored folder       : node_modules
===============================================================================
app-0  | service name: div, version: v1 launched at  8084
app-0  |   <-- GET /status
app-0  |   --> GET /status 200 21ms 11b
app-0  |   <-- GET /app/v1/status
app-0  |   --> GET /app/v1/status 200 3ms 11b
[rundev] App app restarted
app-0  | service name: div, version: v1 launched at  8084
[rundev] App app restarted
app-0  | service name: div, version: v1 launched at  8084
app-0  |   <-- GET /status
app-0  |   --> GET /status 404 28ms -
app-0  |   <-- GET /
app-0  |   --> GET / 404 4ms -
app-0  |   <-- GET /app/v1/status
app-0  |   --> GET /app/v1/status 404 2ms -
[rundev] App app restarted
app-0  | service name: div, version: v1 launched at  8084
app-0  |   <-- GET /app/v1/status
app-0  |   --> GET /app/v1/status 404 25ms -
app-0  |   <-- GET /status
app-0  |   --> GET /status 404 2ms -
[rundev] App app restarted
app-0  | service name: div, version: v1 launched at  8084
app-0  |   <-- GET /status
app-0  |   --> GET /status 200 10ms 11b
[rundev] App app restarted
app-0  | service name: div, version: v1 launched at  8084
[rundev] App app restarted
app-0  | service name: div, version: v1 launched at  8084
[rundev] App app restarted
app-0  | service name: div, version: v1 launched at  8084
app-0  |   <-- GET /status
app-0  |   --> GET /status 404 10ms -
app-0  |   <-- GET /
app-0  |   --> GET / 404 2ms -
app-0  |   <-- GET /app/v1/status
app-0  |   --> GET /app/v1/status 404 1ms -
app-0  |   <-- GET /app/v1/status
app-0  |   --> GET /app/v1/status 404 2ms -
[rundev] App app restarted
app-0  | service name: div, version: v1 launched at  8084
app-0  |   <-- GET /app/v1/div
app-0  |   --> GET /app/v1/div 404 9ms -
app-0  |   <-- POST /app/v1/div
app-0  |   --> POST /app/v1/div 404 2ms -
[rundev] App app restarted
[rundev] App app restarted
app-0  | C:\Users\Home\Desktop\uservices\microcalc\divJs\app.js:26
app-0  |     .prefix(${APP_BASEPATH})
app-0  |             ^
app-0  | SyntaxError: missing ) after argument list
[rundev] App app restarted

Terminate batch job (Y/N)? y

C:\Users\Home\Desktop\uservices\microcalc\divJs>npm run start:dev

> uservices.microcalc.div@0.0.1 start:dev
> pm2-dev app.js

===============================================================================
--- PM2 development mode ------------------------------------------------------
Apps started         : app
Processes started    : 1
Watch and Restart    : Enabled
Ignored folder       : node_modules
===============================================================================
app-0  | service name: div, version: v1 launched at  8084
app-0  |   <-- POST /app/v1/div
app-0  |   --> POST /app/v1/div 404 9ms -
app-0  |   <-- POST /app/v1//div
app-0  |   --> POST /app/v1//div 404 2ms -
[rundev] App app restarted
app-0  | service name: div, version: v1 launched at  8084
[rundev] App app restarted
app-0  | service name: div, version: v1 launched at  8084
app-0  |   <-- POST /app/v1/div
app-0  |   --> POST /app/v1/div 404 12ms -
[rundev] App app restarted
app-0  | service name: div, version: v1 launched at  8084
app-0  |   <-- POST /app/v1/div
app-0  |   --> POST /app/v1/div 404 14ms -
[rundev] App app restarted
app-0  | service name: div, version: v1 launched at  8084
app-0  |   <-- POST /div
app-0  | request.body =  {}
app-0  |   xxx POST /div 400 6ms -
app-0  |   <-- POST /div
app-0  | request.body =  { operands: [ 6, 4 ] }
app-0  |   --> POST /div 404 28ms -
[rundev] App app restarted
[rundev] App app restarted
app-0  | service name: div, version: v1 launched at  8084
app-0  |   <-- POST /div
app-0  | request.body =  { operands: [ 6, 4 ] }
app-0  | Received 6 4
app-0  |   --> POST /div 200 36ms 12b
[rundev] App app restarted
[rundev] App app restarted
app-0  | service name: div, version: v1 launched at  8084
[rundev] App app restarted
app-0  | service name: div, version: v1 launched at  8084
app-0  |   <-- POST /div
app-0  | request.body =  { operands: [ 6, 4 ] }
app-0  | Received 6 4
app-0  |   xxx POST /div 500 30ms -
app-0  |   ReferenceError: res is not defined
[rundev] App app restarted
app-0  | service name: div, version: v1 launched at  8084
app-0  |   <-- POST /div
app-0  | request.body =  { operands: [ 6, 4 ] }
app-0  | Received 6 4
app-0  |   --> POST /div 200 39ms 112b
[rundev] App app restarted
[rundev] App app restarted
app-0  | service name: div, version: v1 launched at  8084
[rundev] App app restarted
app-0  | service name: div, version: v1 launched at  8084
app-0  |   <-- POST /div
app-0  | request.body =  { operands: [ 6, 4 ] }
app-0  | Received 6 4
app-0  |   --> POST /div 200 41ms 110b
app-0  |   <-- POST /div
app-0  | request.body =  { operands: [ 6, 4, 3 ] }
app-0  |   xxx POST /div 400 4ms -
app-0  |   <-- POST /div
app-0  | request.body =  { operands: [] }
app-0  |   xxx POST /div 400 3ms -
app-0  |   <-- POST /div
app-0  | request.body =  {}
app-0  |   xxx POST /div 400 1ms -
app-0  |   <-- POST /div
app-0  | request.body =  {}
app-0  |   xxx POST /div 400 1ms -
[rundev] App app restarted
app-0  | service name: div, version: v1 launched at  8084
[rundev] App app restarted
app-0  | service name: div, version: v1 launched at  8084
[rundev] App app restarted
app-0  | service name: div, version: v1 launched at  8084


```
* *curl output*

These are the curl commands fired and the respective response in the console. 
```
C:\Users\Home\Desktop\uservices>
C:\Users\Home\Desktop\uservices>
C:\Users\Home\Desktop\uservices>
C:\Users\Home\Desktop\uservices>
C:\Users\Home\Desktop\uservices>curl http://localhost:4000/Hello World
C:\Users\Home\Desktop\uservices>
C:\Users\Home\Desktop\uservices>
C:\Users\Home\Desktop\uservices>curl http://localhost:4000/
Hello World
C:\Users\Home\Desktop\uservices>curl http://localhost:4000/
Hello World
C:\Users\Home\Desktop\uservices>curl http://localhost:4000/
Hello World
C:\Users\Home\Desktop\uservices>curl http://localhost:4000/
curl: (7) Failed to connect to localhost port 4000 after 2253 ms: Connection refused

C:\Users\Home\Desktop\uservices>curl http://localhost:8084/
Hello World
C:\Users\Home\Desktop\uservices>
C:\Users\Home\Desktop\uservices>curl http://localhost:8084/status
Hello World
C:\Users\Home\Desktop\uservices>curl http://localhost:8084/app/v1/status 
Hello World
C:\Users\Home\Desktop\uservices>curl http://localhost:8084/status        
Not Found
C:\Users\Home\Desktop\uservices>curl http://localhost:8084/              
Not Found
C:\Users\Home\Desktop\uservices>curl http://localhost:8084/app/v1/status
Not Found
C:\Users\Home\Desktop\uservices>curl http://localhost:8084/app/v1/status
Not Found
C:\Users\Home\Desktop\uservices>curl http://localhost:8084/status        
Not Found
C:\Users\Home\Desktop\uservices>curl http://localhost:8084/status
Hello World
C:\Users\Home\Desktop\uservices>curl http://localhost:8084/status
Not Found
C:\Users\Home\Desktop\uservices>curl http://localhost:8084/       
Not Found
C:\Users\Home\Desktop\uservices>curl http://localhost:8084/app/v1/status
Not Found
C:\Users\Home\Desktop\uservices>curl -X GET http://localhost:8084/app/v1/status    
Not Found
C:\Users\Home\Desktop\uservices>curl -X GET http://localhost:8084/app/v1/div       
Not Found
C:\Users\Home\Desktop\uservices>curl -X POST http://localhost:8084/app/v1/div      
Not Found
C:\Users\Home\Desktop\uservices>curl -X POST http://localhost:8084/app/v1/div
Not Found
C:\Users\Home\Desktop\uservices>curl -X POST http://localhost:8084/app/v1//div 
Not Found
C:\Users\Home\Desktop\uservices>curl -X POST http://localhost:8084/app/v1/div  
Not Found
C:\Users\Home\Desktop\uservices>curl -X POST http://localhost:8084/app/v1/div
Not Found
C:\Users\Home\Desktop\uservices>curl -X POST http://localhost:8084/div        
{ error: 'Invalid input', service: name: div, version: v1 }
C:\Users\Home\Desktop\uservices>curl -X POST http://localhost:8084/div -H "Content-Type: application/json" -d "{\"operands\": [6,4]}"
Not Found
C:\Users\Home\Desktop\uservices>curl -X POST http://localhost:8084/div -H "Content-Type: application/json" -d "{\"operands\": [6,4]}"
{data: 'ok'}
C:\Users\Home\Desktop\uservices>curl -X POST http://localhost:8084/div -H "Content-Type: application/json" -d "{\"operands\": [6,4]}"
Internal Server Error
C:\Users\Home\Desktop\uservices>curl -X POST http://localhost:8084/div -H "Content-Type: application/json" -d "{\"operands\": [6,4]}"
{
            result: 6 / 4,
            operands: [6, 4],
            service: name: div, version: v1
        }
C:\Users\Home\Desktop\uservices>curl -X POST http://localhost:8084/div -H "Content-Type: application/json" -d "{\"operands\": [6,4]}"
{
            result: 1.5,
            operands: [6, 4],
            service: name: div, version: v1
        }
C:\Users\Home\Desktop\uservices>curl -X POST http://localhost:8084/div -H "Content-Type: application/json" -d "{\"operands\": [6,4,3]}" 
{ error: 'Invalid input', service: name: div, version: v1 }
C:\Users\Home\Desktop\uservices>curl -X POST http://localhost:8084/div -H "Content-Type: application/json" -d "{\"operands\": []}"
{ error: 'Invalid input', service: name: div, version: v1 }
C:\Users\Home\Desktop\uservices>curl -X POST http://localhost:8084/div -H "Content-Type: application/json" -d "{}"
{ error: 'Invalid input', service: name: div, version: v1 }
C:\Users\Home\Desktop\uservices>curl -X POST http://localhost:8084/div -H "Content-Type: application/json"
{ error: 'Invalid input', service: name: div, version: v1 }
C:\Users\Home\Desktop\uservices>
```